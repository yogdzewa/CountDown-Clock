C51 COMPILER V9.60.0.0   INTERNAL_CALLBACK                                                 07/03/2022 23:33:31 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE INTERNAL_CALLBACK
OBJECT MODULE PLACED IN .\output\internal_callback.obj
COMPILER INVOKED BY: E:\Keil_v5\C51\BIN\C51.EXE source\internal_callback.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\inc) DEBUG 
                    -OBJECTEXTEND PRINT(.\list\internal_callback.lst) TABS(2) OBJECT(.\output\internal_callback.obj)

line level    source

   1          #include "callback.h"
   2          #define CALLBACK_CNT 5
   3          code callback_register all_callbacks[] = {
   4              // {enumEventSys1mS, on_timer_1ms},
   5              // {enumEventSys10mS, on_timer_10ms},
   6              {enumEventSys100mS, on_timer_100ms},
   7              // {enumEventSys1S, on_timer_1sec},
   8          
   9              {enumEventKey, __on_button},
  10              {enumEventNav, __on_nav},
  11          
  12              // {enumEventHall, on_sensor_hall},
  13              {enumEventVib, on_sensor_vib},
  14          
  15              // {enumEventIrRxd, on_ir_rx},
  16              // {enumEventUart1Rxd, on_uart1_rx},
  17              // {enumEventUart2Rxd, on_uart2_rx},
  18          
  19              {enumEventXADC, on_event_adc}};
  20          
  21          void init_callbacks()
  22          {
  23   1          u_byte n = CALLBACK_CNT;
  24   1          u_byte i = 0;
  25   1          for (; i < n; i++)
  26   1              SetEventCallBack(all_callbacks[i].event, all_callbacks[i].callback);
  27   1      }
  28          
  29          void __on_button()
  30          {
  31   1          {
  32   2              u_byte key2act = GetKeyAct(enumKey2);
  33   2              if (key2act == enumKeyPress)
  34   2                  on_btn2_down();
  35   2              else if (key2act == enumKeyRelease)
  36   2                  on_btn2_up();
  37   2          }
  38   1      
  39   1          {
  40   2              u_byte key1act = GetKeyAct(enumKey1);
  41   2              if (key1act == enumKeyPress)
  42   2                  on_btn1_down();
  43   2              else if (key1act == enumKeyRelease)
  44   2                  on_btn1_up();
  45   2          }
  46   1      }
  47          
  48          void __on_nav()
  49          {
  50   1          BUTTON_DISPATCH(enumAdcNavKey3, on_btn3_up, on_btn3_down);
  51   1          BUTTON_DISPATCH(enumAdcNavKeyCenter, on_nav_up, on_nav_down);
  52   1          BUTTON_DISPATCH(enumAdcNavKeyDown, on_downbtn_up, on_downbtn_down);
  53   1          BUTTON_DISPATCH(enumAdcNavKeyUp, on_upbtn_up, on_upbtn_down);
  54   1          BUTTON_DISPATCH(enumAdcNavKeyLeft, on_leftbtn_up, on_leftbtn_down);
C51 COMPILER V9.60.0.0   INTERNAL_CALLBACK                                                 07/03/2022 23:33:31 PAGE 2   

  55   1          BUTTON_DISPATCH(enumAdcNavKeyRight, on_rightbtn_up, on_rightbtn_down);
  56   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    195    ----
   CONSTANT SIZE    =     20    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
